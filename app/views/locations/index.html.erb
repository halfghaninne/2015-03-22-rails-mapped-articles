<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:500px; height: 500px; }
</style>

<div id='map' class='dark'></div>
<script type='text/javascript'>

// need to figure out how to set height and width here 

L.mapbox.accessToken = 'pk.eyJ1IjoiaGFsZmdoYW5pbm5lIiwiYSI6IjFsaXlKYVUifQ.KArbwbb7EBBh5jKW_B5Gyg';
var map = L.mapbox.map('map', 'halfghaninne.liga61p0')
    .setView([41.284, -95.945], 12);

	// var get_locations = new XMLHttpRequest();
	// get_locations.open("get", "locations", true);
	// get_locations.send();
	// get_locations.addEventListener("load", function() {
	//
	// 	var geojson = JSON.parse(this.response);
	// 	console.log(geojson)
	// 	//
	// var d = [{
	// 	"type": "Feature",
	// 	"geometry": {
	// 		"type": "Point",
	// 		"coordinates": ["-95.94387","41.149713"]
	// 	},
	// 	"properties": {
	// 		"name": "home",
	// 		"address": "2305 Middletown Place, Bellevue, NE, 68123",
	// 		"marker-color": "#00607d",
	// 		"marker-symbol":"circle",
	// 		"marker-size":"medium"
	// 	}
	// },
	// {
	// 	"type": "Feature",
	// 	"geometry":{
	// 		"type":"Point",
	// 		"coordinates": ["-95.933731","41.246105"]
	// 	},
	// 	"properties":{
	// 		"name":"Omaha Code School",
	// 		"address":"1258 S 13th St, Omaha, NE 68108",
	// 		"marker-color":"#00607d",
	// 		"marker-symbol":"circle",
	// 		"marker-size":"medium"
	// 	}
	// },
	// {"type":"Feature","geometry":{"type":"Point","coordinates":["-95.9341535","41.2665467"]},"properties":{"name":"The Slowdown","address":"729 N 14th Street, Omaha, NE 68102","marker-color":"#00607d","marker-symbol":"circle","marker-size":"medium"}}, {"type":"Feature","geometry":{"type":"Point","coordinates":["-96.0086419","41.285218"]},"properties":{"name":"The Waiting Room","address":"6212 Maple Street, Omaha, NE 68104","marker-color":"#00607d","marker-symbol":"circle","marker-size":"medium"}}];
	
		map.featureLayer.setGeoJSON(<%= raw(@geojsonformatted) %>)

	// });
	
// $.ajax
//   dataType: 'text'
//   url: 'happy_hours/happening_now.json'
//   success: (data) ->
//     geojson = $.parseJSON(data)
//     map.featureLayer.setGeoJSON(geojson)


// L.mapbox.accessToken = 'pk.eyJ1IjoiaGFsZmdoYW5pbm5lIiwiYSI6ImJuM0wwbm8ifQ.109o-AfmKCbMITcnOvrmFA';
//
// var map = L.mapbox.map('map', 'halfghaninne.liga61p0').setView([41.229, -96.032], 12);

  // var map = L.mapbox.map('map', 'examples.map-y7l23tes').setView([37.9, -77], 5);
</script>